{"version":3,"file":"loadBabelOptions.js","names":["cache","WeakMap","empty","loadBabelOptions","babel","filename","overrides","fileCache","get","Map","has","babelOptions","loadOptions","caller","name","set"],"sources":["../../src/options/loadBabelOptions.ts"],"sourcesContent":["import type { TransformOptions } from '@babel/core';\n\nimport type { Core } from '../babel';\n\nconst cache = new WeakMap<\n  Partial<TransformOptions>,\n  Map<string, TransformOptions>\n>();\n\nconst empty = {};\n\nexport default function loadBabelOptions(\n  babel: Core,\n  filename: string,\n  overrides: TransformOptions = empty\n) {\n  const fileCache = cache.get(overrides) ?? new Map<string, TransformOptions>();\n  if (fileCache.has(filename)) {\n    return fileCache.get(filename)!;\n  }\n\n  const babelOptions: TransformOptions =\n    babel.loadOptions({\n      ...overrides,\n      filename,\n      caller: { name: 'linaria' },\n    }) ?? {};\n\n  fileCache.set(filename, babelOptions);\n  cache.set(overrides, fileCache);\n\n  return babelOptions;\n}\n"],"mappings":";;;;;;AAIA,MAAMA,KAAK,GAAG,IAAIC,OAAO,EAGtB;AAEH,MAAMC,KAAK,GAAG,CAAC,CAAC;AAED,SAASC,gBAAgB,CACtCC,KAAW,EACXC,QAAgB,EAChBC,SAA2B,GAAGJ,KAAK,EACnC;EAAA;EACA,MAAMK,SAAS,iBAAGP,KAAK,CAACQ,GAAG,CAACF,SAAS,CAAC,mDAAI,IAAIG,GAAG,EAA4B;EAC7E,IAAIF,SAAS,CAACG,GAAG,CAACL,QAAQ,CAAC,EAAE;IAC3B,OAAOE,SAAS,CAACC,GAAG,CAACH,QAAQ,CAAC;EAChC;EAEA,MAAMM,YAA8B,yBAClCP,KAAK,CAACQ,WAAW,CAAC;IAChB,GAAGN,SAAS;IACZD,QAAQ;IACRQ,MAAM,EAAE;MAAEC,IAAI,EAAE;IAAU;EAC5B,CAAC,CAAC,mEAAI,CAAC,CAAC;EAEVP,SAAS,CAACQ,GAAG,CAACV,QAAQ,EAAEM,YAAY,CAAC;EACrCX,KAAK,CAACe,GAAG,CAACT,SAAS,EAAEC,SAAS,CAAC;EAE/B,OAAOI,YAAY;AACrB"}