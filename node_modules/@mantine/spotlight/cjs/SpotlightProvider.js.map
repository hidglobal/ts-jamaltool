{"version":3,"file":"SpotlightProvider.js","sources":["../src/SpotlightProvider.tsx"],"sourcesContent":["import React, { useRef } from 'react';\nimport { useDisclosure, useUncontrolled } from '@mantine/hooks';\nimport { useSpotlightEvents } from './events';\nimport { SpotlightContext } from './Spotlight.context';\nimport { InnerSpotlightProps, Spotlight } from './Spotlight/Spotlight';\nimport type { SpotlightAction } from './types';\nimport { useActionsState } from './use-actions-state/use-actions-state';\nimport { useSpotlightShortcuts } from './use-spotlight-shortcuts/use-spotlight-shortcuts';\n\nexport interface SpotlightProviderProps extends InnerSpotlightProps {\n  /** Actions list */\n  actions: SpotlightAction[];\n\n  /** Called when actions change (registered or removed) */\n  onActionsChange?(actions: SpotlightAction[]): void;\n\n  /** Controlled search query */\n  query?: string;\n\n  /** Called when user enters text in search input */\n  onQueryChange?(query: string): void;\n\n  /** Your application */\n  children?: React.ReactNode;\n\n  /** Called when spotlight opens */\n  onSpotlightOpen?(): void;\n\n  /** Called when spotlight closes */\n  onSpotlightClose?(): void;\n\n  /** Keyboard shortcut or list of shortcuts to trigger spotlight */\n  shortcut?: string | string[] | null;\n\n  /** Should search be cleared when spotlight closes */\n  cleanQueryOnClose?: boolean;\n\n  /** Spotlight will not render if disabled is set to true */\n  disabled?: boolean;\n\n  /** Tags to ignore shortcut hotkeys on. */\n  tagsToIgnore?: string[];\n\n  /** Whether shortcuts should trigger based on contentEditable. */\n  triggerOnContentEditable?: boolean;\n}\n\nexport function SpotlightProvider({\n  actions,\n  children,\n  shortcut = 'mod + K',\n  query,\n  onSpotlightClose,\n  onSpotlightOpen,\n  onQueryChange,\n  onActionsChange,\n  cleanQueryOnClose = true,\n  transitionProps = { duration: 150 },\n  disabled = false,\n  tagsToIgnore = ['INPUT', 'TEXTAREA', 'SELECT'],\n  triggerOnContentEditable = false,\n  ...others\n}: SpotlightProviderProps) {\n  const timeoutRef = useRef<number>(-1);\n\n  const [_query, setQuery] = useUncontrolled({\n    value: query,\n    defaultValue: '',\n    finalValue: '',\n    onChange: onQueryChange,\n  });\n\n  const [_actions, { registerActions, removeActions, triggerAction }] = useActionsState({\n    actions,\n    onActionsChange,\n  });\n\n  const handleQueryChange = (value: string) => {\n    setQuery(value);\n    onQueryChange?.(value);\n  };\n\n  const [opened, { open, close, toggle }] = useDisclosure(false, {\n    onClose: () => {\n      onSpotlightClose?.();\n      if (cleanQueryOnClose) {\n        timeoutRef.current = window.setTimeout(() => {\n          handleQueryChange('');\n        }, transitionProps.duration || 150);\n      }\n    },\n    onOpen: () => {\n      onSpotlightOpen?.();\n      window.clearTimeout(timeoutRef.current);\n    },\n  });\n\n  const ctx = {\n    openSpotlight: open,\n    closeSpotlight: close,\n    toggleSpotlight: toggle,\n    registerActions,\n    removeActions,\n    triggerAction,\n    opened,\n    actions: _actions,\n    query: _query,\n  };\n\n  useSpotlightShortcuts(shortcut, open, tagsToIgnore, triggerOnContentEditable);\n  useSpotlightEvents({ open, close, toggle, registerActions, removeActions, triggerAction });\n\n  return (\n    <SpotlightContext.Provider value={ctx}>\n      {!disabled && (\n        <Spotlight\n          actions={_actions}\n          onClose={close}\n          opened={opened}\n          query={_query}\n          onQueryChange={handleQueryChange}\n          transitionProps={transitionProps}\n          {...others}\n        />\n      )}\n      {children}\n    </SpotlightContext.Provider>\n  );\n}\n\nSpotlightProvider.displayName = '@mantine/spotlight/SpotlightProvider';\n"],"names":["useRef","useUncontrolled","useActionsState","useDisclosure","useSpotlightShortcuts","useSpotlightEvents","React","SpotlightContext","Spotlight"],"mappings":"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"}